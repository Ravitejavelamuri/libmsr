# This currently builds a user space program and not a useful library

CFLAGS=	 -I.. -L.. -Wall -g -ansi -pedantic -lmsr

MSRQUICKERASER=		msr-quick-eraser
MSRQUICKERASERSRCS=	msr-quick-eraser.c
MSRQUICKERASEROBJS=	msr-quick-eraser.o

MSRQUICKISODUMPER=		msr-quick-iso-dumper
MSRQUICKISODUMPERSRCS=		msr-quick-iso-dumper.c
MSRQUICKISODUMPEROBJS=		msr-quick-iso-dumper.o

MSRQUICKRAWDUMPER=		msr-quick-raw-dumper
MSRQUICKRAWDUMPERSRCS=		msr-quick-raw-dumper.c
MSRQUICKRAWDUMPEROBJS=		msr-quick-raw-dumper.o

all:	$(MSRQUICKERASER) $(MSRQUICKISODUMPER) $(MSRQUICKRAWDUMPER)

$(MSRQUICKERASER): $(MSRQUICKERASEROBJS)
	$(CC) -o $(MSRQUICKERASER) $(MSRQUICKERASEROBJS) $(CFLAGS)

$(MSRQUICKISODUMPER): $(MSRQUICKISODUMPEROBJS)
	$(CC) -o $(MSRQUICKISODUMPER) $(MSRQUICKISODUMPEROBJS) $(CFLAGS)

$(MSRQUICKRAWDUMPER): $(MSRQUICKRAWDUMPEROBJS)
	$(CC) -o $(MSRQUICKRAWDUMPER) $(MSRQUICKRAWDUMPEROBJS) $(CFLAGS)

.c.o:
	${CC} ${CFLAGS} ${CPPFLAGS} -o $@ -c $<

install:
	install -m655 $(MSRQUICKERASER) $(DESTDIR)/usr/bin/$(MSRQUICKERASER)
	install -m655 $(MSRQUICKISODUMPER)) $(DESTDIR)/usr/bin/$(MSRQUICKISODUMPER)
	install -m655 $(MSRQUICKRAWDUMPER) $(DESTDIR)/usr/bin/$(MSRQUICKRAWDUMPER)

clean:
	rm -rf *.o *~ $(MSRQUICKERASER) $(MSRQUICKISODUMPER) $(MSRQUICKRAWDUMPER)
