# This currently builds some sample user space programs

CFLAGS =	-I.. -Wall -g -ansi -pedantic
LDFLAGS = -L.. -lmsr

MSRQUICKERASER=		msr-quick-eraser
MSRQUICKERASEROBJS=	msr-quick-eraser.o

MSRQUICKISODUMPER=		msr-quick-iso-dumper
MSRQUICKISODUMPEROBJS=		msr-quick-iso-dumper.o

MSRQUICKRAWDUMPER=		msr-quick-raw-dumper
MSRQUICKRAWDUMPEROBJS=		msr-quick-raw-dumper.o

FILEBITREVERSER=		file-bit-reverser
FILEBITREVERSERSRCS=		file-bit-reverser.c
FILEBITREVERSEROBJS=		file-bit-reverser.o

FILEBITSHIFTER=		file-bit-shifter
FILEBITSHIFTERSRCS=		file-bit-shifter.c
FILEBITSHIFTEROBJS=		file-bit-shifter.o

all:	$(MSRQUICKERASER) $(MSRQUICKISODUMPER) $(MSRQUICKRAWDUMPER) \
	$(FILEBITREVERSER) $(FILEBITSHIFTER)

$(MSRQUICKERASER): $(MSRQUICKERASEROBJS)
	$(CC) -o $(MSRQUICKERASER) $(MSRQUICKERASEROBJS) $(LDFLAGS)

$(MSRQUICKISODUMPER): $(MSRQUICKISODUMPEROBJS)
	$(CC) -o $(MSRQUICKISODUMPER) $(MSRQUICKISODUMPEROBJS) $(LDFLAGS)

$(MSRQUICKRAWDUMPER): $(MSRQUICKRAWDUMPEROBJS)
	$(CC) -o $(MSRQUICKRAWDUMPER) $(MSRQUICKRAWDUMPEROBJS) $(LDFLAGS)

$(FILEBITREVERSER): $(FILEBITREVERSEROBJS)
	$(CC) -o $(FILEBITREVERSER) $(FILEBITREVERSEROBJS) $(CFLAGS)

$(FILEBITSHIFTER): $(FILEBITSHIFTEROBJS)
	$(CC) -o $(FILEBITSHIFTER) $(FILEBITSHIFTEROBJS) $(CFLAGS)

.c.o:
	$(CC) $(CFLAGS) $(CPPFLAGS) -o $@ -c $<

install:
	install -m655 $(MSRQUICKERASER) $(DESTDIR)/usr/bin/$(MSRQUICKERASER)
	install -m655 $(MSRQUICKISODUMPER) $(DESTDIR)/usr/bin/$(MSRQUICKISODUMPER)
	install -m655 $(MSRQUICKRAWDUMPER) $(DESTDIR)/usr/bin/$(MSRQUICKRAWDUMPER)
	install -m655 $(FILEBITREVERSER) $(DESTDIR)/usr/bin/$(FILEBITREVERSER)
	install -m655 $(FILEBITSHIFTER) $(DESTDIR)/usr/bin/$(FILEBITSHIFTER)

clean:
	rm -rf *.o *~
	rm -rf $(MSRQUICKERASER) $(MSRQUICKISODUMPER) $(MSRQUICKRAWDUMPER)
	rm -rf $(FILEBITREVERSER) $(FILEBITSHIFTER)
